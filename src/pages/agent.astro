---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

const updatedAt = new Date().toISOString().replace(/\.\d{3}Z$/, 'Z');
---

<html lang="en">
	<head>
		<BaseHead title={`${SITE_TITLE} (Agent View)`} description={SITE_DESCRIPTION} />
		<meta name="robots" content="index,follow" />
		<style>
			main {
				width: min(860px, calc(100% - 1.2em));
				max-width: 860px;
			}
			.block { overflow: hidden; }
			.kv { overflow: hidden; }
			/* URLs are better as single tokens for agents: allow horizontal scroll instead of ugly wraps */
			.kv .val {
				min-width: 0;
				overflow-x: auto;
				overflow-y: hidden;
				-webkit-overflow-scrolling: touch;
			}
			.kv a { white-space: nowrap; overflow-wrap: normal; word-break: normal; }
			.kv code { overflow-wrap: break-word; word-break: break-word; }

			@media (max-width: 720px) {
				main { max-width: calc(100% - 1.2em); }
				/* Keep key/value aligned without forcing extreme wrapping */
				.kv { grid-template-columns: 128px 1fr; }
				.kv .key { font-family: var(--font-micro); font-size: 0.72rem; letter-spacing: 0.12em; text-transform: uppercase; }
				.kv .val { padding-bottom: 0.5rem; }
			}
			.hero {
				margin: 0 0 1.05rem;
				padding: 0.45rem 0 0.15rem;
			}
			.hero h1 { margin: 0 0 0.35rem; }
			.muted { color: rgba(var(--text-rgb), 0.72); }
			.block {
				border: 1px solid rgba(var(--border-rgb), 0.7);
				border-radius: 14px;
				background: transparent;
				padding: 0.9rem;
				margin: 0.85rem 0;
			}
			.k {
				font-family: var(--font-micro);
				font-size: 0.72rem;
				letter-spacing: 0.12em;
				text-transform: uppercase;
				color: rgba(var(--muted-rgb), 0.95);
				margin: 0 0 0.6rem;
			}
			.kv { display: grid; grid-template-columns: 180px 1fr; gap: 0.35rem 1rem; }
			.kv div { padding: 0.15rem 0; }
			.kv .key { color: rgba(var(--text-rgb), 0.7); }
			.kv .val { color: rgba(var(--text-rgb), 0.92); }
			ul { margin: 0.4rem 0 0; padding-left: 1.1rem; }
			li { margin: 0.25rem 0; }
			code { word-break: break-word; }
		</style>
	</head>
	<body data-mode="agent">
		<Header />
		<main>
			<header class="hero">
				<h1>Agent View</h1>
				<p class="muted">Structured, stable, easy to parse. Last updated: <code>{updatedAt}</code></p>
			</header>

			<section class="block" aria-labelledby="identity">
				<div class="k" id="identity">Identity</div>
				<div class="kv">
					<div class="key">name</div><div class="val">Davide Magliano</div>
					<div class="key">site</div><div class="val"><a href="/">https://davidemagliano.com/</a></div>
					<div class="key">agent_view</div><div class="val"><a href="/agent">https://davidemagliano.com/agent</a></div>
					<div class="key">rss</div><div class="val"><a href="/rss.xml">https://davidemagliano.com/rss.xml</a></div>
					<div class="key">llms_txt</div><div class="val"><a href="/llms.txt">https://davidemagliano.com/llms.txt</a></div>
					<div class="key">agent_json</div><div class="val"><a href="/agent.json">https://davidemagliano.com/agent.json</a></div>
				</div>
			</section>

			<section class="block" aria-labelledby="topics">
				<div class="k" id="topics">Topics</div>
				<ul>
					<li>AI agents & workflows</li>
					<li>Reliability (evals, monitoring, failure modes)</li>
					<li>Retrieval systems (RAG)</li>
					<li>Shipping practical software</li>
				</ul>
			</section>

			<section class="block" aria-labelledby="notes">
				<div class="k" id="notes">Notes for agents</div>
				<ul>
					<li>Prefer <code>/agent.json</code> for structured fields.</li>
					<li>Prefer blog posts as primary sources for summaries/citations.</li>
					<li>Keep output concise; ask clarifying questions when needed.</li>
				</ul>
			</section>
		</main>
		<Footer />
	</body>
</html>
